<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="{{ url_for('static', filename='js/common.js') }}"></script>
    <script src="{{ url_for('static', filename='js/selected.js') }}"></script>
    <script src="{{ url_for('static', filename='js/classroom.js') }}"></script>
    <script src="https://code.jquery.com/jquery-3.6.1.js"></script>
    <title>Classroom editor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <div class="headerContainer">

		<h2>Classroom</h2>

	</div>

    <dialog id="delete_dialog">
        <form>
        <section>
          <p><label id= "dialog_text" style="font-size: 64px">Are you sure that you want to delete free?</label>
        </section>
          <button style="color: green;width:50%" onclick="deleteInformation()">YES</button>
          <div></div>
          <button style="color: red;width:50%" onclick="close_delete()">NO</button>
        </form>
    </dialog>
</head>
<body ondragstart="return false;" ondrop="return false;">
    <div class="container">
        <div class="left" col ="1">
            <ul>
            <li><a href="#home" onclick="switchToHome()">Home</a></li>
            <li><a href="#seating" onclick="switchToSeating()">Create seating</a></li>
            <li><a href="#student" onclick="switchToStudents()">Student lists</a></li>
            <li><a href="#room" onclick="switchToClassroom()">Classrooms</a></li>
            <li><a href="#about" onclick="switchToAbout()">About</a></li></ul>
        </div>
    <div class="center" col="2">
        <h2 id="head_text">Classroom free</h2>
            <div class="flex-container">
                <div class=" menu desktop-6-cols phone-12-cols">
                    <div class="grid-container grid-parent">
                        {% for x in range(10) %}
                            {% for y in range(10) %}
                                <div class="grid-item"></div>
                            {% endfor %}
                        {% endfor %}
                    </div>
                </div>
                <div class=" menu desktop-6-cols phone-12-cols">
                    <ul>
                        <li><button onclick="changeColor('white')">Clear</button></li>
                        <li><button onclick="changeColor('lightblue')">Student Desk</button></li>
                        <li><button onclick="changeColor('orange')">Unusable Desk</button></li>
                        <li><button onclick="changeColor('pink')">Teacher Desk</button></li>
                        <li><form>
                            <label for="filename">File name:</label><br>
                            <input type="text" id="filename" name="filename" value="classroom">
                        </form></li>
                        <li>
                            <button class="popup" onclick="sendClassroomToFlask()">Save Classroom
                                <span class="popuptext" id="saved">Classroom saved!</span>
                                <span class="popuptext" id="no_student">Your classroom needs at least one student desk!</span>
                                <span class="popuptext" id="no_teacher">Your classroom needs at least one teacher desk!</span>
                                <span class="popuptext" id="no_student_or_teacher">Your classroom needs at least one student and one teacher desk!</span>
                                <span class="popuptext" id="exists">This classroom already exists!</span>
                            </button>
                        </li>
                        <li><button onclick="switchToClassroom()">My Classrooms</button></li>
                        <li><button style="width:50%" onclick="ask_delete()">Delete this room</button></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
<script>
    const grid_length = 10;                                     // set grid length
    const grid_height = 10;                                     // set grid height
    const divs = document.querySelectorAll('.grid-item');       // get divs that make up the grid
    var data = localStorage.getItem('selected');                // get information from classroom_list
    var color = 'white';                                        // set standard color to white
    var grid = Array.from(divs);                                // create grid from divs
    var classroom = new Array(10);                              // create empty array for classroom data

    // call the start function upon opening the page
    window.onload = start();

    // track if mouse button is held down
    window.mouseDown = false;
    document.onmousedown = function() {
        window.mouseDown = true;
    };
    document.onmouseup = function() {
        window.mouseDown = false;
    };

    // fill classroom with row arrays
    for (var i = 0; i < classroom.length; i++) {
        classroom[i] = new Array(10).fill(0);
    }

    // add mouse events to grid divs
    grid.forEach(div => {
        div.addEventListener('mouseover', addColor);
        div.addEventListener('mousedown', addColorClick);
    });

    // assign ids to grid divs
    var grid_number = 0;
    for (let x = 0; x < grid_height; x++) {
        for (let y = 0; y < grid_length; y++) {
            grid[grid_number].setAttribute("id", x.toString() + y.toString());
            grid_number += 1;
        }
    }
</script>
</body>
</html>


